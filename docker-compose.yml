version: '2'
services:
    php53:
        volumes:
            - /home/vipconsult/http:/home/http
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: php53

    php5:
        volumes:
            - /home/vipconsult/http:/home/http
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: php5

    nginx:
        volumes:
            - /home/vipconsult/http:/home/http
        ports:
            - "139.162.199.192:80:80"
            - "139.162.199.192:443:443"
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: nginx
        # entrypoint: bash
        # command: -c "ping google.com"

    memcached:
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: memcached

    smtp:
        volumes:
            - /home/vipconsult/exim:/var/spool/exim4
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: smtp

    mysql:
        privileged:
            true
        cap_add:
            - ALL
        volumes:
            - /home/vipconsult/mysql1:/var/lib/mysql
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: mysql

    psql:
        volumes:
            - /home/vipconsult/postgresql:/var/lib/postgresql/data
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: psql

    cron:
        volumes:  
            - /usr/bin/docker:/usr/bin/docker:ro
            - /usr/lib/x86_64-linux-gnu/libapparmor.so.1:/usr/lib/x86_64-linux-gnu/libapparmor.so.1:ro
        env_file:
            - env-prod
        extends:
            file: docker-compose-dev.yml
            service: cron